# LD-Notion 使用教程

> 写给第一次用的你。从安装到玩转，一步一步来。

---

## 目录

1. [先搞清楚这个脚本能干嘛](#先搞清楚这个脚本能干嘛)
2. [安装](#安装)
3. [准备工作：搞定 Notion 那边的事](#准备工作搞定-notion-那边的事)
4. [第一次导出收藏帖子](#第一次导出收藏帖子)
5. [筛选设置：只导你想要的内容](#筛选设置只导你想要的内容)
6. [自动导入：躺平也能同步](#自动导入躺平也能同步)
7. [AI 助手：用人话管理你的 Notion](#ai-助手用人话管理你的-notion)
8. [在 Notion 里用 AI 助手](#在-notion-里用-ai-助手)
9. [权限和安全](#权限和安全)
10. [遇到问题？](#遇到问题)
11. [一些小技巧](#一些小技巧)

---

## 先搞清楚这个脚本能干嘛

简单说，两件事：

**第一件**——把你在 Linux.do 收藏的帖子批量搬到 Notion。不是那种复制粘贴的搬，是保留格式、代码高亮、表格、图片那种完整搬。收藏了 200 个帖子？一键全导过去。

**第二件**——给你一个 AI 助手，能用大白话操作 Notion。"搜一下关于 Docker 的帖子"、"把没分类的文章都归个类"、"帮我建个叫周报的数据库"——直接说就行，它自己去干。

这两个功能可以单独用，也可以配合着用。你只想导帖子？完全没问题。你只想用 AI 管 Notion？也行。

---

## 安装

### 第 1 步：装 Tampermonkey

Tampermonkey 是个浏览器插件，专门用来跑用户脚本的。没装过的话：

- Chrome 用户：去 [Chrome 商店](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo) 安装
- Firefox 用户：去 [Firefox 商店](https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/) 安装
- Edge 用户：去 [Edge 商店](https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd) 安装

装完之后浏览器右上角会多一个小方块图标，那就是 Tampermonkey。

<!-- 📸 截图：浏览器右上角的 Tampermonkey 图标 -->

### 第 2 步：安装脚本

1. 点 Tampermonkey 图标，选"添加新脚本"
2. 把编辑器里原有的内容全删掉
3. 打开 `LinuxDo-Bookmarks-to-Notion.user.js`，复制全部内容
4. 粘贴到编辑器里
5. `Ctrl + S` 保存

<!-- 📸 截图：Tampermonkey 编辑器界面，已粘贴脚本内容 -->

保存成功后，Tampermonkey 管理面板里应该能看到 "LD-Notion" 这个脚本，状态是开启的。

<!-- 📸 截图：Tampermonkey 管理面板中显示 LD-Notion 脚本已启用 -->

---

## 准备工作：搞定 Notion 那边的事

这一步稍微麻烦点，但只需要做一次。

### 创建 Integration（获取 API Key）

Notion 不是随便就让外部程序读写数据的，需要你手动创建一个"Integration"来授权。

1. 打开 [Notion Integrations](https://www.notion.so/my-integrations)
2. 点 **New integration**
3. 起个名字，比如"LD-Notion"
4. 选你要用的 Workspace
5. **Capabilities** 那里确保这三个都勾上：
   - Read content
   - Update content
   - Insert content
6. 点 **Submit**

<!-- 📸 截图：Notion Integration 创建页面，勾选了三个 Capabilities -->

创建好之后，你会看到一个 **Internal Integration Token**，以 `secret_` 开头，长长一串。把它复制下来，待会要用。

> 这个 Token 就是你的 Notion API Key，别泄露给别人。

<!-- 📸 截图：复制 Integration Token 的界面 -->

### 创建接收数据的数据库

在 Notion 里新建一个数据库（Full-page database 或 Inline database 都行），用来存导入的帖子。

数据库需要包含这些属性列：

| 属性名 | 类型 | 干嘛用的 |
|--------|------|----------|
| 标题 | Title | 帖子标题（这个是自带的，改个名就行） |
| 链接 | URL | 帖子在 Linux.do 的原始链接 |
| 分类 | Text | 帖子分类，比如"开发调优"、"非技术讨论" |
| 标签 | Multi-select | 帖子的标签 |
| 作者 | Text | 发帖人 |
| 收藏时间 | Date | 你收藏这个帖子的时间 |
| 帖子数 | Number | 回帖数 |
| 浏览数 | Number | 浏览量 |
| 点赞数 | Number | 点赞数 |

不想手动建？没关系，后面有个"自动设置数据库"按钮可以帮你搞定。

<!-- 📸 截图：Notion 数据库属性设置界面，显示上述所有列 -->

### 把 Integration 关联到数据库

这一步很多人会忘，然后就一直报错。

1. 打开你刚建的数据库
2. 点右上角的 `...` 菜单
3. 找到 **Connections**（有的版本叫 **Connect to**）
4. 搜索并选择你刚创建的那个 Integration

<!-- 📸 截图：Notion 数据库右上角菜单 → Connections → 选择 Integration -->

关联好之后，这个 Integration 就有权限读写这个数据库了。

### 拿到数据库 ID

打开数据库，看浏览器地址栏：

```
https://www.notion.so/你的workspace/这一串就是数据库ID?v=xxx
```

中间那段 32 位的字母数字混合，就是数据库 ID。复制下来。

> 如果你不想手动复制 ID，后面面板里有个 🔄 按钮可以自动获取你工作区里的所有数据库，下拉选就行。

---

## 第一次导出收藏帖子

准备工作做完了，来导出第一批帖子试试。

### 打开收藏页面

在浏览器里访问你的 Linux.do 收藏页面：

```
https://linux.do/u/你的用户名/activity/bookmarks
```

页面右边会自动出现一个深蓝色的工具面板，标题是"📚 收藏导出到 Notion"。

<!-- 📸 截图：Linux.do 收藏页面右侧出现的工具面板全貌 -->

如果没出现，检查一下 Tampermonkey 里脚本是不是启用状态。

### 填写配置

面板最上面是 **Notion 配置**区域：

1. **API Key**：粘贴你刚才复制的 `secret_` 开头的那串
2. **数据库 ID**：粘贴 32 位的数据库 ID，或者点旁边的 🔄 按钮从工作区列表里选

<!-- 📸 截图：面板 Notion 配置区域，已填写 API Key 和数据库 ID -->

填完之后，点 **验证配置** 按钮。如果一切正常，会显示绿色的成功提示。

> 第一次用的话，建议也点一下 **自动设置数据库** 按钮，它会自动帮你在数据库里创建缺失的属性列，省得手动一个个建。

### 加载收藏列表

点 **🔄 加载收藏列表** 按钮，脚本会去拉取你所有的收藏帖子。

加载完之后，你会看到一个带勾选框的列表，每个帖子显示标题、分类和作者。默认全选。

<!-- 📸 截图：加载出来的收藏列表，显示帖子标题和勾选框 -->

不想导某些帖子？取消勾选就行。上面有个"全选/取消"的快捷开关。

### 开始导出

确认选好了之后，点 **📤 开始导出**。

导出过程中，你能看到实时进度。每导完一个帖子，列表上会打勾标记。

<!-- 📸 截图：导出进行中的进度显示 -->

导出过程中你可以：
- 点 **⏸️ 暂停**：暂时停下来，之后可以继续
- 点 **⏹️ 取消**：直接中止

导完之后会弹出一个导出报告，告诉你哪些成功了、哪些失败了。

<!-- 📸 截图：导出完成后的导出报告 -->

去 Notion 里看看吧，帖子应该都躺在数据库里了，格式、代码块、表格什么的都保留着。

<!-- 📸 截图：Notion 数据库中导入的帖子列表 -->

---

## 筛选设置：只导你想要的内容

点面板里的 **筛选设置** 展开更多选项。

### 基本筛选

- **仅主楼**：勾上之后只导帖子正文（1 楼），不导回帖
- **仅楼主**：只导楼主自己发的内容，跳过别人的回帖
- **楼层范围**：比如填 1 到 10，就只导前 10 楼

这三个可以组合用。比如你只想要帖子正文，勾"仅主楼"就够了。

### 图片处理

三种模式：

| 模式 | 说明 | 建议 |
|------|------|------|
| **上传到 Notion** | 图片会上传到 Notion 的服务器 | 最稳定，但导出慢一些 |
| **外链引用** | 直接引用原图地址 | 速度快，但原图删了就看不到了 |
| **跳过图片** | 不处理图片 | 最快，适合只要文字内容的情况 |

### 导出速度

两个参数可以调：

- **请求间隔**：每次调用 Notion API 之间的等待时间。默认 500ms，想快点可以选 200ms。太快了 Notion 可能会限速（429 错误），不过脚本会自动等待重试。
- **并发数**：同时导出几个帖子。默认串行（1 个），开到 3 或 5 个能快不少。

<!-- 📸 截图：筛选设置展开后的完整界面 -->

### 导出目标

面板里还有个 **导出目标** 选项：

- **数据库（推荐）**：帖子作为数据库条目导入，带各种属性（标题、链接、分类等），方便筛选排序
- **页面（子页面）**：帖子作为子页面创建在你指定的父页面下，适合想把内容整理成笔记树结构的情况

---

## 自动导入：躺平也能同步

手动导出适合一次性批量处理，但如果你希望新收藏的帖子自动同步到 Notion，可以开启自动导入。

在收藏列表区域，勾上 **启用自动导入新收藏**。

<!-- 📸 截图：自动导入选项勾选后展开的轮询间隔设置 -->

勾选后会多出一个**轮询间隔**选项：

| 选项 | 含义 |
|------|------|
| 仅页面加载时 | 每次打开收藏页面时检查一次 |
| 每 3 分钟 | 每 3 分钟自动检查一次新收藏 |
| 每 5 分钟 | 每 5 分钟检查一次（默认） |
| 每 10 分钟 | 每 10 分钟检查一次 |
| 每 30 分钟 | 每 30 分钟检查一次 |

开启之后，脚本会定时去看你有没有新收藏，有的话就自动导出到 Notion。已经导过的不会重复导。

> 需要保持收藏页面打开（可以放后台标签页）。关了页面自动导入就停了。

---

## AI 助手：用人话管理你的 Notion

这是这个脚本最好玩的部分。

### 配置 AI

在 Linux.do 面板里往下拉，找到 **🤖 AI 助手** 区域，展开 **⚙️ AI 设置**。

<!-- 📸 截图：AI 设置区域展开后的完整界面 -->

需要填的东西：

1. **AI 服务**：选一个你有 API Key 的服务
   - OpenAI（ChatGPT 背后那家）
   - Claude（Anthropic 家的）
   - Gemini（Google 家的）

2. **模型**：选好服务之后，点右边的 🔄 按钮可以自动拉取可用的模型列表

3. **API Key**：你的 AI 服务 API Key（跟 Notion API Key 是两码事，别搞混了）

4. **自定义端点（可选）**：如果你用的是第三方代理或者兼容 API，在这里填地址。用官方的就留空。

5. **分类列表**：自动分类功能会用到这些类别，用逗号隔开。默认是"技术, 生活, 问答, 分享, 资源, 其他"，你可以改成自己的。

6. **查询数据库**：AI 查数据的时候查哪个库
   - 当前配置的数据库：就查你上面填的那个库
   - 所有工作区数据库：查你 Notion 工作区里所有的库
   - 也可以点 🔄 刷新列表，指定某个库

填完之后，点 **测试连接** 确认 AI 能正常工作。

### 开始对话

在对话框里直接打字，说人话就行。

<!-- 📸 截图：AI 对话区域，展示一个示例对话 -->

你可以试试这些：

#### 搜索和查询

```
搜索关于 Docker 的帖子
```

```
最近一周收藏了几个帖子？
```

```
统计一下各分类有多少文章
```

AI 会自动去 Notion 里搜索和查询，然后把结果整理好告诉你。

#### 自动分类

```
帮我把没分类的文章自动分类一下
```

AI 会读取每篇文章的内容，根据你设置的分类列表自动给它们打标签。

#### 创建和编辑

```
创建一个叫"学习笔记"的数据库
```

```
在这个页面末尾加一段总结
```

```
把这篇文章翻译成英文
```

#### 整理

```
把"Docker 入门"这个页面移到"归档"数据库
```

```
复制一份"项目计划"到"备份"数据库
```

#### RAG 问答

```
我的笔记里有没有关于 Kubernetes 的内容？
```

AI 会在你的 Notion 工作区里搜索相关内容，然后基于搜索结果回答你的问题。

### AI 到底能干什么？

说白了就是 11 个工具，AI 会根据你说的话自动决定用哪个：

| 你说的 | AI 用的工具 | 具体在干嘛 |
|--------|-------------|------------|
| "搜索 xxx" | search_workspace | 搜索你工作区的页面和数据库 |
| "查一下数据库里 xxx" | query_database | 带条件查询数据库 |
| "这个页面写了啥" | read_page | 读取页面内容 |
| "这个数据库有哪些字段" | get_database_schema | 查数据库结构 |
| "在页面里追加 xxx" | write_content | 往页面里写内容 |
| "把标题改成 xxx" | update_page | 更新页面属性 |
| "新建一个 xxx" | create_page | 在数据库里新建页面 |
| "自动分类" | auto_classify | AI 批量分类 |
| "移动到 xxx" | move_page | 把页面移到另一个数据库 |
| "复制到 xxx" | copy_page | 复制页面到另一个数据库 |
| "建一个新数据库" | create_database | 创建新数据库 |

复杂的任务 AI 会自动拆解，比如"统计各分类的文章数量"，它会先查数据库结构，再分组查询，最后汇总结果给你。

---

## 在 Notion 里用 AI 助手

除了在 Linux.do 上用，你还可以直接在 Notion 里用 AI 助手。

打开任意 Notion 页面，右下角会出现一个 🤖 浮动按钮。

<!-- 📸 截图：Notion 页面右下角的 🤖 浮动按钮 -->

点一下，弹出 AI 面板。

<!-- 📸 截图：Notion 站点的 AI 助手面板展开后的样子 -->

面板里有：
- **对话区域**：跟 Linux.do 侧一样的对话窗口
- **设置**（点 ⚙️ 展开）：Notion API Key、数据库/页面选择器、AI 服务配置

### 这个面板和 Linux.do 侧有什么区别？

功能完全一样，配置也是共享的（改一边另一边也会变）。区别只是用的地方不同——一个在 Linux.do，一个在 Notion。

### 数据库 / 页面选择器

点 🔄 刷新按钮，会自动拉取你工作区里的所有数据库和页面。

<!-- 📸 截图：数据库/页面下拉框展开，显示📁 数据库和📄 页面两个分组 -->

下拉框里分两组显示：
- 📁 **数据库**：你工作区里的数据库
- 📄 **页面**：工作区顶级页面

选一个作为 AI 操作的默认目标。

### 面板位置

觉得面板挡事？直接拖拽标题栏，放到你喜欢的位置。下次打开还会记住。

浮动按钮也一样，可以拖到屏幕边缘。

---

## 权限和安全

这个脚本有一套权限控制系统，防止 AI 误操作搞砸你的 Notion。

面板 Notion 配置区域的底部有三个设置：

### 权限级别

| 级别 | 能做什么 |
|------|----------|
| **只读** | 只能搜索、查询、阅读 |
| **标准**（默认） | 可以创建页面、更新属性、写入内容、自动分类 |
| **高级** | 可以移动页面、复制页面、创建数据库 |
| **管理员** | 全部权限 |

建议日常用"标准"就够了。需要移动/复制页面的时候临时切到"高级"。

### 危险操作确认

开启后，移动、删除等可能造成数据丢失的操作会弹窗让你确认。默认开启，别关。

### 审计日志

记录 AI 助手执行的所有操作。在面板最下面的 **📋 操作日志** 里可以查看。

<!-- 📸 截图：权限设置区域 + 操作日志面板 -->

---

## 遇到问题？

### "验证配置失败"

最常见的三个原因：

1. **API Key 复制错了**——确认是以 `secret_` 开头的完整字符串，前后别带空格
2. **数据库 ID 不对**——应该是 32 位字母数字，不是整个 URL
3. **忘了关联 Integration**——回到 Notion 数据库页面，`...` → Connections → 选上你的 Integration

### "图片显示不出来"

- 如果用的"外链引用"模式，原图被删了就没了。换成"上传到 Notion"模式重新导出
- 有些图片源 Notion 访问不了（比如某些需要登录才能看的图）

### "导出速度慢"

- 并发数调到 3 或 5
- 请求间隔调到 200ms
- 图片模式选"跳过图片"或"外链引用"
- 遇到 429（速率限制）是正常的，脚本会自动等一等再重试

### "AI 助手报错"

- AI 的 API Key 和 Notion 的 API Key 是**两个不同的东西**，别搞混
- OpenAI 的 Key 要选 OpenAI 服务，Claude 的 Key 要选 Claude 服务
- 用自定义端点的话，确认地址能访问

### "想重新导出已经导过的帖子"

打开浏览器控制台（F12），执行：

```javascript
GM_setValue("ldb_exported_topics", "{}")
```

这会清除导出记录，之后就可以重新导出了。

---

## 一些小技巧

### 1. 先小批量试试

第一次用别急着全导。先勾 3-5 个帖子试试水，确认格式、图片都没问题了再批量来。

### 2. 导出目标怎么选？

- 想像数据库表格那样管理帖子（排序、筛选、看统计）→ 选**数据库**
- 想把帖子整理成笔记本/知识库的树状结构 → 选**页面**

### 3. AI 不知道怎么问？

直接输入 `帮助`，AI 会告诉你它能干什么。

### 4. 面板挡住了页面内容？

点标题栏右边的 `−` 按钮最小化，页面上会留一个小图标，点一下就能恢复。

### 5. 数据库属性一键创建

觉得手动在 Notion 里建属性麻烦？填好 API Key 和数据库 ID 之后，点 **自动设置数据库** 按钮，脚本会自动帮你在数据库里创建所有需要的属性列。

---

*有其他问题或建议？去 [GitHub Issues](https://github.com/Smith-106/LD-Notion/issues) 反馈吧。*
